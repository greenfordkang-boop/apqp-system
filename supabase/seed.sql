-- ============================================
-- APQP System Seed Data
-- 테스트용 샘플 데이터
-- ============================================

-- 1. Characteristics (Single Source of Truth)
INSERT INTO characteristics (id, name, type, category, specification, lsl, usl, unit, measurement_method) VALUES
('c1000000-0000-0000-0000-000000000001', '외경 치수', 'product', 'critical', '10.0 ± 0.2', 9.8, 10.2, 'mm', '버니어 캘리퍼스'),
('c1000000-0000-0000-0000-000000000002', '내경 치수', 'product', 'critical', '5.0 ± 0.1', 4.9, 5.1, 'mm', '내경 마이크로미터'),
('c1000000-0000-0000-0000-000000000003', '표면 조도', 'product', 'major', 'Ra 1.6 이하', NULL, 1.6, 'Ra', '조도계'),
('c1000000-0000-0000-0000-000000000004', '경도', 'product', 'major', 'HRC 58-62', 58, 62, 'HRC', '경도계'),
('c1000000-0000-0000-0000-000000000005', '외관 (스크래치)', 'product', 'minor', '한도 샘플 기준', NULL, NULL, NULL, '육안 검사'),
('c1000000-0000-0000-0000-000000000006', '가공 온도', 'process', 'critical', '850 ± 10', 840, 860, '°C', '접촉식 온도계'),
('c1000000-0000-0000-0000-000000000007', '이송 속도', 'process', 'major', '100-150', 100, 150, 'mm/min', 'CNC 모니터링');

-- 2. PFMEA Header
INSERT INTO pfmea_headers (id, project_id, process_name, revision, status) VALUES
('ph000000-0000-0000-0000-000000000001', NULL, 'CNC 선반 가공 공정', 1, 'approved');

-- 3. PFMEA Lines
INSERT INTO pfmea_lines (id, pfmea_id, step_no, process_step, characteristic_id, potential_failure_mode, potential_effect, severity, potential_cause, occurrence, current_control_prevention, current_control_detection, detection, recommended_action, action_priority) VALUES
('pl000000-0000-0000-0000-000000000001', 'ph000000-0000-0000-0000-000000000001', 10, '소재 투입', NULL, '소재 오투입', '규격 불일치 제품 생산', 8, '작업자 실수', 3, '바코드 스캔 시스템', '초품 검사', 4, '자동 소재 인식 시스템 도입', 'M'),
('pl000000-0000-0000-0000-000000000002', 'ph000000-0000-0000-0000-000000000001', 20, '1차 황삭 가공', 'c1000000-0000-0000-0000-000000000001', '외경 치수 불량', '조립 불가', 9, '공구 마모', 4, '공구 수명 관리', '자주 검사 (버니어)', 3, '자동 공구 보정 시스템', 'H'),
('pl000000-0000-0000-0000-000000000003', 'ph000000-0000-0000-0000-000000000001', 30, '내경 가공', 'c1000000-0000-0000-0000-000000000002', '내경 치수 불량', '조립 불가', 9, '척킹 불량', 3, '척킹 압력 관리', '자주 검사 (플러그 게이지)', 2, NULL, 'M'),
('pl000000-0000-0000-0000-000000000004', 'ph000000-0000-0000-0000-000000000001', 40, '정삭 가공', 'c1000000-0000-0000-0000-000000000003', '표면 조도 불량', '기능 저하', 6, '절삭 조건 부적합', 4, '절삭 조건표 운영', '조도 측정', 4, NULL, 'L'),
('pl000000-0000-0000-0000-000000000005', 'ph000000-0000-0000-0000-000000000001', 50, '열처리', 'c1000000-0000-0000-0000-000000000004', '경도 미달/초과', '내구성 저하', 8, '온도 편차', 3, '온도 프로파일 관리', '경도 전수 검사', 2, NULL, 'M'),
('pl000000-0000-0000-0000-000000000006', 'ph000000-0000-0000-0000-000000000001', 60, '최종 검사', 'c1000000-0000-0000-0000-000000000005', '외관 불량 미검출', '클레임 발생', 7, '검사 누락', 2, '검사 체크리스트', '전수 육안 검사', 3, NULL, 'L');

-- 4. Control Plan
INSERT INTO control_plans (id, pfmea_id, name, revision, status) VALUES
('cp000000-0000-0000-0000-000000000001', 'ph000000-0000-0000-0000-000000000001', 'CNC 선반 가공 Control Plan', 1, 'approved');

-- 5. Control Plan Items
INSERT INTO control_plan_items (id, control_plan_id, pfmea_line_id, characteristic_id, step_no, process_step, control_type, control_method, sample_size, frequency, reaction_plan, responsible) VALUES
('ci000000-0000-0000-0000-000000000001', 'cp000000-0000-0000-0000-000000000001', 'pl000000-0000-0000-0000-000000000002', 'c1000000-0000-0000-0000-000000000001', 20, '1차 황삭 가공', 'detection', '버니어 캘리퍼스로 외경 측정', '5개', '매 로트', '불합격 시 전수 검사 및 공구 교체', '가공 담당자'),
('ci000000-0000-0000-0000-000000000002', 'cp000000-0000-0000-0000-000000000001', 'pl000000-0000-0000-0000-000000000003', 'c1000000-0000-0000-0000-000000000002', 30, '내경 가공', 'detection', '플러그 게이지로 GO/NO-GO 검사', '전수', '매 개', '불합격품 즉시 격리', '가공 담당자'),
('ci000000-0000-0000-0000-000000000003', 'cp000000-0000-0000-0000-000000000001', 'pl000000-0000-0000-0000-000000000004', 'c1000000-0000-0000-0000-000000000003', 40, '정삭 가공', 'detection', '조도계로 표면 조도 측정', '3개', '2시간마다', '조도 초과 시 절삭 조건 재설정', '품질 담당자'),
('ci000000-0000-0000-0000-000000000004', 'cp000000-0000-0000-0000-000000000001', 'pl000000-0000-0000-0000-000000000005', 'c1000000-0000-0000-0000-000000000004', 50, '열처리', 'detection', '경도계로 HRC 측정', '전수', '매 개', '경도 불합격 시 재열처리 또는 폐기', '열처리 담당자'),
('ci000000-0000-0000-0000-000000000005', 'cp000000-0000-0000-0000-000000000001', 'pl000000-0000-0000-0000-000000000006', 'c1000000-0000-0000-0000-000000000005', 60, '최종 검사', 'detection', '한도 샘플 대비 육안 검사', '전수', '매 개', '외관 불량 시 격리 및 원인 분석', '검사 담당자'),
('ci000000-0000-0000-0000-000000000006', 'cp000000-0000-0000-0000-000000000001', 'pl000000-0000-0000-0000-000000000005', 'c1000000-0000-0000-0000-000000000006', 50, '열처리', 'prevention', '온도 프로파일 모니터링', 'N/A', '연속', '온도 편차 발생 시 즉시 조정 및 기록', '열처리 담당자');
